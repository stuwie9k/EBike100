<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EBike100 MK220</title>
    <link rel="stylesheet" href="products.css" />
    <link rel="stylesheet" href="../main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="navbar">
      <div class="navbar-top">
        <div class="logo">
          <a href="../Ebike.html">
            <img
              src="../assets/images/whiteLogo.png"
              alt="Logo Icon"
              class="logo-icon"
            />
          </a>
        </div>

        <div class="navbar-icons">
          <div class="cart-icon-mobile">
            <img
              src="../assets/images/ShoppingCart.png"
              alt="Cart Icon"
              class="icon-sm cart-icon"
            />
          </div>
          <div class="menu-toggle">â˜°</div>
        </div>
      </div>

      <nav class="nav-links">
        <a href="../EBike.html">Home</a>
        <a href="productpage.html" class="active">E-Bikes</a>
        <a href="#">Accessories</a>
        <a href="#">Services</a>
        <a href="#">About Us</a>
        <a href="#">News</a>
        <a href="#">Contact</a>
      </nav>

      <div class="search-container">
        <div class="search-wrapper">
          <input type="text" placeholder="Search" />
          <button class="search-btn">
            <img
              src="../assets/images/SearchIcon.png"
              alt="Search Icon"
              class="icon-sm"
            />
          </button>
        </div>
        <div class="cart-icon-desktop">
          <a href="cart.html">
            <img
              src="../assets/images/ShoppingCart.png"
              alt="Cart Icon"
              class="icon-sm cart-icon"
            />
          </a>
        </div>
      </div>
    </header>

    <main class="product-detail">
      <a href="productpage.html" class="back-link">&lt; Back</a>
      <div class="product-layout">
        <div class="product-gallery">
          <img
            src="../assets/images/MK220.png"
            alt="Main Product"
            class="main-img"
          />
          <div class="thumbnail-row">
            <img src="../assets/images/MK220_product1.png" alt="Thumb 1" />
            <img src="../assets/images/MK220_product2.png" alt="Thumb 2" />
            <img src="../assets/images/MK220_product3.png" alt="Thumb 3" />
          </div>
        </div>

        <div class="product-info">
          <h1>Electric Cargo Bike MK220</h1>
          <p class="price">$950.00 AUD</p>
          <div class="options">
            <label>Battery Capacity</label>
            <!-- Battery capacity options -->
            <div class="option-group" id="battery-options">
              <button type="button" data-value="48V 30AH">48V 30AH</button>
              <button type="button" data-value="48V 40AH">48V 40AH</button>
              <button type="button" data-value="48V 80AH">48V 80AH</button>
            </div>
            <label>Wheel Size (inch)</label>
            <!-- Wheel size options -->
            <div class="option-group" id="wheel-options">
              <button type="button" data-value="14">14</button>
              <button type="button" data-value="18">18</button>
              <button type="button" data-value="20">20</button>
            </div>
          </div>

          <button onclick="handleAddToCart()" class="add-to-cart">
            Add to Cart
          </button>
          <div class="accordion">
            <div class="accordion-item">
              <h3>Description</h3>
              <div class="content">Detailed product description...</div>
            </div>
            <div class="accordion-item">
              <h3>Specifications</h3>
              <div class="content">Specs...</div>
            </div>
            <div class="accordion-item">
              <h3>Performance</h3>
              <div class="content">Performance info...</div>
            </div>
            <div class="accordion-item">
              <h3>Warranty</h3>
              <div class="content">Warranty details...</div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="products.js"></script>
    <script>
      function handleAddToCart() {
        const batteryBtn = document.querySelector("#battery-options .selected");
        const wheelBtn = document.querySelector("#wheel-options .selected");

        if (!batteryBtn || !wheelBtn) {
          alert("Please select battery capacity and wheel size.");
          return;
        }

        const selectedBattery = batteryBtn.dataset.value;
        const selectedWheel = wheelBtn.dataset.value;

        // Get the correct base product
        const baseProduct = PRODUCTS.MK220; // or PRODUCTS.MK514 depending on the page

        // Create full product with selected options
        const product = {
          ...baseProduct,
          battery: selectedBattery,
          wheelSize: selectedWheel,
        };

        addToCart(product); // <-- this calls your original addToCart() function
      }
    </script>
  </body>
</html>
